<?xml version="1.0" encoding="UTF-8"?>
<!-- 日志级别以及优先级排序: OFF > FATAL > ERROR > WARN > INFO > DEBUG > TRACE > ALL -->
<!-- monitorInterval: Log4j能够自动检测修改配置 文件和重新配置本身，设置间隔秒数|status: 这个用于设置log4j2自身内部的信息输出，可以不设置，当设置成trace时，你会看到log4j2内部各种详细输出-->
<Configuration status="WARN">
    <!--变量配置-->
    <Properties>
        <Property name="CONSOLE_PATTERN"
                  value="%d{yyyy-MM-dd HH:mm:ss,SSS} %highlight{%-5p}{ERROR=Bright RED, WARN=Bright Yellow, INFO=Bright Green, DEBUG=Bright Cyan, TRACE=Bright White} %pid{-} --- [%32t] [%tr] %-32c : %m%ex%n"/>
        <Property name="LOG_PATTERN"
                  value="%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p %pid{-} --- [%32t] [%tr] %-32c : %m%ex%n"/>
        <Property name="FILE_PATH" value="${sys:LOG_PATH}"/>
        <Property name="FILE_NAME" value="${sys:LOG_FILE}"/>
    </Properties>

    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout pattern="${CONSOLE_PATTERN}"/>
            <ThresholdFilter level="DEBUG" onMatch="ACCEPT" onMismatch="DENY"/>
        </Console>
        <RollingFile name="RollingFile" fileName="${FILE_PATH}/${FILE_NAME}.log"
                     filePattern="${FILE_PATH}/$${date:yyyy-MM-dd}/${FILE_NAME}_%d{yyyy-MM-dd}_%i.log.gz">
            <PatternLayout pattern="${LOG_PATTERN}"/>
            <ThresholdFilter level="DEBUG" onMatch="ACCEPT" onMismatch="DENY"/>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true"/>
                <SizeBasedTriggeringPolicy size="512MB"/>
            </Policies>
            <DefaultRolloverStrategy max="200">
                <Delete basePath="${FILE_PATH}" maxDepth="2">
                    <IfFileName glob="*/*.log.gz"/>
                    <IfLastModified age="3d"/>
                </Delete>
            </DefaultRolloverStrategy>
        </RollingFile>
    </Appenders>

    <Loggers>
        <root level="INFO">
            <Appender-Ref ref="Console"/>
            <Appender-Ref ref="RollingFile"/>
        </root>
        <logger name="druid.sql.Statement" level="DEBUG" additivity="false">
            <Appender-Ref ref="Console"/>
            <Appender-Ref ref="RollingFile"/>
        </logger>
    </Loggers>
</Configuration>